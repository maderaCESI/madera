<!DOCTYPE html>
	<titre><% provide(:title, 'Devis') %></titre>
	<head lang="en">
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<%= stylesheet_link_tag    'metro', media: 'all' %>
		<%= stylesheet_link_tag    'metro-icons', media: 'all' %>
		<%= stylesheet_link_tag    'metro-responsive', media: 'all' %>

		<%= javascript_include_tag 'jquery-2.1.3.min' %>
		<%= javascript_include_tag 'metro' %>

		<script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>

		<style>
			.tile-area-controls {
				position: fixed;
				right: 40px;
				top: 40px;
			}

			.tile-group {
				left: 100px;
			}

			.tile, .tile-small, .tile-sqaure, .tile-wide, .tile-large, .tile-big, .tile-super {
				opacity: 0;
				-webkit-transform: scale(.8);
				transform: scale(.8);
			}

			#charmSettings .button {
				margin: 5px;
			}

			.schemeButtons {
				/*width: 300px;*/
			}

			@media screen and (max-width: 640px) {
				.tile-area {
					overflow-y: scroll;
				}
				.tile-area-controls {
					display: none;
				}
			}

			@media screen and (max-width: 320px) {
				.tile-area {
					overflow-y: scroll;
				}

				.tile-area-controls {
					display: none;
				}

			}
		</style>
		<script>
				(function($) {
						$.StartScreen = function(){
								var plugin = this;
								var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;

								plugin.init = function(){
										setTilesAreaSize();
										if (width > 640) addMouseWheel();
								};

								var setTilesAreaSize = function(){
										var groups = $(".tile-group");
										var tileAreaWidth = 80;
										$.each(groups, function(i, t){
												if (width <= 640) {
														tileAreaWidth = width;
												} else {
														tileAreaWidth += $(t).outerWidth() + 80;
												}
										});
										$(".tile-area").css({
												width: tileAreaWidth
										});
								};

								var addMouseWheel = function (){
										$("body").mousewheel(function(event, delta, deltaX, deltaY){
												var page = $(document);
												var scroll_value = delta * 50;
												page.scrollLeft(page.scrollLeft() - scroll_value);
												return false;
										});
								};

								plugin.init();
						}
				})(jQuery);

				$(function(){
						$.StartScreen();

						var tiles = $(".tile, .tile-small, .tile-sqaure, .tile-wide, .tile-large, .tile-big, .tile-super");

						$.each(tiles, function(){
								var tile = $(this);
								setTimeout(function(){
										tile.css({
												opacity: 1,
												"-webkit-transform": "scale(1)",
												"transform": "scale(1)",
												"-webkit-transition": ".3s",
												"transition": ".3s"
										});
								}, Math.floor(Math.random()*500));
						});

						$(".tile-group").animate({
								left: 0
						});
				});

				function setSearchPlace(el){
						var a = $(el);
						var text = a.text();
						var toggle = a.parents('label').children('.dropdown-toggle');

						toggle.text(text);
				}

				$(function(){
						var current_tile_area_scheme = localStorage.getItem('tile-area-scheme') || "tile-area-scheme-dark";
						$(".tile-area").removeClass (function (index, css) {
								return (css.match (/(^|\s)tile-area-scheme-\S+/g) || []).join(' ');
						}).addClass(current_tile_area_scheme);

						$(".schemeButtons .button").hover(
								function(){
										var b = $(this);
										var scheme = "tile-area-scheme-" +  b.data('scheme');
										$(".tile-area").removeClass (function (index, css) {
												return (css.match (/(^|\s)tile-area-scheme-\S+/g) || []).join(' ');
										}).addClass(scheme);
								},
								function(){
										$(".tile-area").removeClass (function (index, css) {
												return (css.match (/(^|\s)tile-area-scheme-\S+/g) || []).join(' ');
										}).addClass(current_tile_area_scheme);
								}
						);

						$(".schemeButtons .button").on("click", function(){
								var b = $(this);
								var scheme = "tile-area-scheme-" +  b.data('scheme');

								$(".tile-area").removeClass (function (index, css) {
										return (css.match (/(^|\s)tile-area-scheme-\S+/g) || []).join(' ');
								}).addClass(scheme);

								current_tile_area_scheme = scheme;
								localStorage.setItem('tile-area-scheme', scheme);

								showSettings();
						});
				});

		</script>

	</head>

	<div class="tile-area tile-area-scheme-dark fg-white" style="height: 100%; max-height: 100% !important;">
		<h1 class="tile-area-title">DEVIS</h1>
		<div class="tile-area-controls">
			<button class="image-button icon-right no-border"><span class="sub-header no-margin text-light"><%= current_user.firstname %> <%= current_user.lastname %></span> <span class="icon mif-user"></span></button>
		</div>
		<div class="tile-group double">
      <h3>Information Devis</h3>
      <div class="tile-container">
        <br>
        <div class="input-control select">
			<%= simple_form_for @order do |f| %>
  				<%= f.input :orderName, label: 'Nom du devis :' %>
  				<%= f.association :project_modular_house, label_method: :client_id, label: 'Nom du client :' %>
  				<%= f.select :project_modular_house, label_method: :client_id, label: 'Nom du client :' %>
  				
  				
  				<%= f.button :submit, "Ajouter" %>
			<% end %>
        </div>
       
      </div>
    </div>
	<div class="tile-group double">
	    <h3>Information Projet</h3>
	    <div class="tile-container">
	      
	  	</div>
    </div>
    
    <div class="tile-group double">
      <h3>Information Maison</h3>
      <div class="tile-container">
        
        <div class="input-control select">
			<%= simple_form_for @order do |f| %>
  				<%= f.input :priceTotal %>
  				<%= f.button :submit %>
			<% end %>
        </div>
      </div>
    </div>
    
	</div>
	
    </thead>
    <tbody>
 

</html>